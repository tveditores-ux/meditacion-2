<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Quantum & Life - Meditation Center</title>
    <style>
        body { margin: 0; background: #010409; color: #e0f2fe; font-family: 'Segoe UI Light', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden; }
        .container { width: 450px; padding: 30px; border: 1px solid #1e3a8a; border-radius: 20px; background: radial-gradient(circle at top, #001e3c 0%, #010409 100%); text-align: center; box-shadow: 0 0 60px rgba(56, 189, 248, 0.2); }
        
        .core { width: 14px; height: 14px; background: #fff; border-radius: 50%; margin: 0 auto 30px; box-shadow: 0 0 80px 25px #38bdf8; opacity: 0.1; }
        .active-pulse { animation: breathe 12s infinite ease-in-out; opacity: 1; }
        @keyframes breathe { 0%, 100% { transform: scale(1); filter: blur(4px); } 50% { transform: scale(15); filter: blur(2px); } }

        .playlist { background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: left; }
        .playlist-item { padding: 10px; cursor: pointer; border-radius: 8px; margin-bottom: 5px; border: 1px solid transparent; transition: 0.3s; font-size: 0.85rem; }
        .playlist-item:hover { background: rgba(56, 189, 248, 0.1); }
        .playlist-item.selected { background: rgba(56, 189, 248, 0.2); border-color: #38bdf8; color: #fff; }

        .player-section { background: rgba(255,255,255,0.02); padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid rgba(56, 189, 248, 0.1); }
        .label { font-size: 0.7rem; letter-spacing: 2px; margin-bottom: 10px; display: block; color: #7dd3fc; text-transform: uppercase; font-weight: bold; }
        
        .controls { display: flex; gap: 8px; justify-content: center; margin-bottom: 12px; }
        button { background: none; border: 1px solid #38bdf8; color: #38bdf8; padding: 8px 15px; cursor: pointer; border-radius: 5px; font-size: 0.7rem; text-transform: uppercase; transition: 0.3s; flex: 1; }
        button:hover { background: #38bdf8; color: #000; }
        button.active { background: #38bdf8; color: #000; }

        .vol-slider { width: 100%; cursor: pointer; accent-color: #38bdf8; }
        #status { font-size: 0.85rem; color: #64748b; margin-top: 15px; font-style: italic; min-height: 2.5em; line-height: 1.2; }
    </style>
</head>
<body>

<div class="container">
    <div id="visual-core" class="core"></div>

    <div class="playlist">
        <span class="label" style="margin-left:10px">Selecciona tu Meditación:</span>
        <div id="item-0" class="playlist-item selected" onclick="selectMeditation(0)">
            <strong>1. Coherencia Cardíaca</strong><br><small>Estilo Joe Dispenza - El Vacío</small>
        </div>
        <div id="item-1" class="playlist-item" onclick="selectMeditation(1)">
            <strong>2. Restauración Vital</strong><br><small>Tiroides y Circulación - Nuevo Pacto</small>
        </div>
    </div>

    <div class="player-section">
        <span class="label">Música Ondas Alfa</span>
        <div class="controls">
            <button onclick="playMusic()">Play</button>
            <button onclick="pauseMusic()">Pausa</button>
            <button onclick="stopMusic()">Stop</button>
        </div>
        <input type="range" class="vol-slider" id="musicVol" min="0" max="1" step="0.01" value="0.4" oninput="updateMusicVol()">
    </div>

    <div class="player-section">
        <span class="label">Guía de Voz</span>
        <div class="controls">
            <button id="vPlay" onclick="startVoice()">Iniciar Guía</button>
            <button id="vPause" onclick="pauseVoice()">Pausar</button>
            <button onclick="stopVoice()">Reiniciar</button>
        </div>
        <input type="range" class="vol-slider" id="voiceVol" min="0" max="1" step="0.01" value="1" oninput="updateVoiceVol()">
    </div>
    
    <div id="status">Selecciona una meditación y presiona Iniciar Guía</div>
</div>

<audio id="bgAudio" loop preload="auto">
    <source src="https://dl.dropboxusercontent.com/scl/fi/y1z52i2q3g9y1ajcaw8p5/Meditaci-n-de-5-minutos-con-m-sica-binaural-con-Ondas-Alfa-Calma-y-paz-interior-Med-Soul-Med-Soul.mp3?rlkey=j8elwp0uj6tpt0bxucu6eli57&dl=1" type="audio/mpeg">
</audio>

<script>
    const music = document.getElementById('bgAudio');
    const core = document.getElementById('visual-core');
    const status = document.getElementById('status');
    
    let voicePaused = false;
    let currentStep = 0;
    let selectedPlaylist = 0;
    let timer;

    const medSkins = [
        // PLAYLIST 0: COHERENCIA CARDÍACA (DISPENZA)
        [
            { t: "Cierra los ojos. Conviértete en nada. Sé nadie... en ningún lugar... en ningún tiempo.", p: 9000 },
            { t: "Siente el espacio que ocupan tus sienes en el vacío. La oscuridad detrás de tus ojos.", p: 11000 },
            { t: "Lleva tu atención al centro de tu pecho. Respira a través de tu corazón.", p: 11000 },
            { t: "Siente gratitud pura ahora. Visualiza tus arterias relajándose. La sangre fluye como seda.", p: 18000 },
            { t: "Tu presión arterial es perfecta. Eres salud. Eres coherencia.", p: 18000 },
            { t: "Descansa en este vacío. Recibe tu nueva vida. Shalom.", p: 8000 }
        ],
        // PLAYLIST 1: RESTAURACIÓN TIROIDES Y CIRCULACIÓN (NUEVO PACTO)
        [
            { t: "Reconoce que la vida ya reside en ti. No estás fabricando salud, estás conectando con tu diseño original.", p: 8000 },
            { t: "Lleva tu atención a tu cuello, a tu tiroides. Visualiza este centro de equilibrio recibiendo descanso profundo.", p: 10000 },
            { t: "Siente tu metabolismo alineándose. El equilibrio es tu estado natural en el Nuevo Pacto.", p: 11000 },
            { t: "Observa tu sangre. Visualiza tu circulación como un río de vida fluyendo sin obstáculos.", p: 11000 },
            { t: "No hay temor. El amor perfecto echa fuera el temor y relaja cada arteria de tu cuerpo.", p: 13000 },
            { t: "Tu cuerpo es el templo de la Verdad. Eres coherencia, salud y vida. Shalom.", p: 10000 }
        ]
    ];

    function selectMeditation(index) {
        stopVoice();
        selectedPlaylist = index;
        document.querySelectorAll('.playlist-item').forEach(el => el.classList.remove('selected'));
        document.getElementById('item-' + index).classList.add('selected');
        status.innerText = "Seleccionado: " + (index === 0 ? "Coherencia Cardíaca" : "Restauración Vital");
    }

    function playMusic() { music.play(); }
    function pauseMusic() { music.pause(); }
    function stopMusic() { music.pause(); music.currentTime = 0; }
    function updateMusicVol() { music.volume = document.getElementById('musicVol').value; }

    function startVoice() {
        window.speechSynthesis.cancel();
        voicePaused = false;
        core.classList.add('active-pulse');
        document.getElementById('vPlay').classList.add('active');
        document.getElementById('vPause').classList.remove('active');
        hablar(currentStep);
    }

    function pauseVoice() {
        voicePaused = true;
        window.speechSynthesis.cancel();
        document.getElementById('vPause').classList.add('active');
        document.getElementById('vPlay').classList.remove('active');
        core.classList.remove('active-pulse');
        status.innerText = "Guía en pausa";
    }

    function stopVoice() {
        voicePaused = true;
        currentStep = 0;
        window.speechSynthesis.cancel();
        clearTimeout(timer);
        core.classList.remove('active-pulse');
        document.getElementById('vPlay').classList.remove('active');
        document.getElementById('vPause').classList.remove('active');
        status.innerText = "Sesión detenida";
    }

    function hablar(index) {
        const guion = medSkins[selectedPlaylist];
        if (voicePaused || index >= guion.length) {
            if (index >= guion.length) status.innerText = "Shalom. Ya está hecho.";
            return;
        }
        currentStep = index;

        const msg = new SpeechSynthesisUtterance(guion[index].t);
        msg.lang = 'es-ES';
        msg.rate = 0.65;
        msg.pitch = 0.7;
        msg.volume = document.getElementById('voiceVol').value;

        const voices = window.speechSynthesis.getVoices();
        const vozM = voices.find(v => v.lang.includes('es') && (v.name.includes('David') || v.name.includes('Pablo') || v.name.includes('Male')));
        if (vozM) msg.voice = vozM;

        msg.onstart = () => { status.innerText = guion[index].t; };
        msg.onend = () => {
            if (!voicePaused) {
                timer = setTimeout(() => hablar(index + 1), guion[index].p);
            }
        };

        window.speechSynthesis.speak(msg);
    }

    window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();
</script>

</body>
</html>