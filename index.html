<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum & Life - Vida Plena</title>
    <style>
        :root {
            --primary: #38bdf8;
            --bg: #000205;
        }
        
        body { 
            margin: 0; 
            background: var(--bg); 
            color: #e0f2fe; 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh;
            padding: 15px;
            box-sizing: border-box;
        }

        .container { 
            width: 100%; 
            max-width: 500px; 
            padding: 20px; 
            border: 1px solid #1e3a8a; 
            border-radius: 25px; 
            background: radial-gradient(circle at top, #001e3c 0%, #000205 100%); 
            text-align: center; 
            box-shadow: 0 0 40px rgba(56, 189, 248, 0.15);
        }
        
        /* Luz central dinámica */
        .core { 
            width: 12px; height: 12px; 
            background: #fff; 
            border-radius: 50%; 
            margin: 0 auto 15px; 
            box-shadow: 0 0 50px 15px var(--primary); 
            opacity: 0.2; 
            transition: all 1.5s ease; 
        }
        .active-pulse { animation: breathe 10s infinite ease-in-out; opacity: 1; }
        @keyframes breathe { 0%, 100% { transform: scale(1); filter: blur(3px); } 50% { transform: scale(8); filter: blur(2px); } }

        /* Lista de reproducción adaptable */
        .playlist { 
            background: rgba(255,255,255,0.03); 
            padding: 10px; 
            border-radius: 15px; 
            margin-bottom: 15px; 
            text-align: left; 
            border: 1px solid rgba(255,255,255,0.1); 
            max-height: 250px; 
            overflow-y: auto; 
        }
        .playlist-item { 
            padding: 12px; 
            cursor: pointer; 
            border-radius: 10px; 
            margin-bottom: 8px; 
            border: 1px solid transparent; 
            transition: 0.3s; 
            font-size: 0.85rem; 
            line-height: 1.3;
            -webkit-tap-highlight-color: transparent;
        }
        .playlist-item.selected { background: rgba(56, 189, 248, 0.15); border-color: var(--primary); color: #fff; }

        /* Secciones de control */
        .player-section { 
            background: rgba(255,255,255,0.02); 
            padding: 15px; 
            border-radius: 15px; 
            margin-bottom: 12px; 
            border: 1px solid rgba(56, 189, 248, 0.05); 
        }
        .label { font-size: 0.65rem; letter-spacing: 2px; margin-bottom: 10px; display: block; color: #7dd3fc; text-transform: uppercase; font-weight: bold; }
        
        .controls { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px; }
        
        button { 
            background: rgba(56, 189, 248, 0.05); 
            border: 1px solid var(--primary); 
            color: var(--primary); 
            padding: 12px 5px; 
            cursor: pointer; 
            border-radius: 8px; 
            font-size: 0.7rem; 
            text-transform: uppercase; 
            font-weight: bold;
            transition: 0.2s;
        }
        button:active { background: var(--primary); color: #000; }
        button.active { background: #fff; border-color: #fff; color: #000; }

        .vol-slider { width: 100%; cursor: pointer; accent-color: var(--primary); height: 20px; }
        
        #status { 
            font-size: 0.9rem; 
            color: #94a3b8; 
            margin-top: 10px; 
            min-height: 4em; 
            line-height: 1.4; 
            display: flex; 
            align-items: center; 
            justify-content: center;
            font-style: italic;
        }

        /* Ajustes para Tablets y Desktop */
        @media (min-width: 768px) {
            .container { padding: 30px; }
            .playlist-item { font-size: 0.95rem; }
            button { font-size: 0.8rem; padding: 15px; }
        }
    </style>
</head>
<body>

<div class="container">
    <div id="visual-core" class="core"></div>

    <div class="playlist">
        <span class="label">Selecciona Meditación:</span>
        <div id="item-0" class="playlist-item selected" onclick="selectMeditation(0)">
            <strong>1. Coherencia Cardíaca</strong><br><small>El Vacío y el Corazón</small>
        </div>
        <div id="item-1" class="playlist-item" onclick="selectMeditation(1)">
            <strong>2. Restauración Biológica</strong><br><small>Tiroides y Circulación</small>
        </div>
        <div id="item-2" class="playlist-item" onclick="selectMeditation(2)">
            <strong>3. Nuevo Pacto (Salud)</strong><br><small>Identidad y Plenitud</small>
        </div>
        <div id="item-3" class="playlist-item" onclick="selectMeditation(3)">
            <strong>4. Coherencia Financiera</strong><br><small>Provisión y Mayordomía</small>
        </div>
    </div>

    <div class="player-section">
        <span class="label">Música (Bucle)</span>
        <div class="controls">
            <button onclick="playMusic()">Play</button>
            <button onclick="pauseMusic()">Pausa</button>
            <button onclick="stopMusic()">Stop</button>
        </div>
        <input type="range" class="vol-slider" id="musicVol" min="0" max="1" step="0.01" value="0.4" oninput="updateMusicVol()">
    </div>

    <div class="player-section">
        <span class="label">Guía de Voz</span>
        <div class="controls">
            <button id="vPlay" onclick="startVoice()">Iniciar</button>
            <button id="vPause" onclick="pauseVoice()">Pausar</button>
            <button onclick="stopVoice()">Reset</button>
        </div>
        <input type="range" class="vol-slider" id="voiceVol" min="0" max="1" step="0.01" value="1" oninput="updateVoiceVol()">
    </div>
    
    <div id="status">Selecciona una guía para comenzar...</div>
</div>

<audio id="bgAudio" loop preload="auto">
    <source src="https://dl.dropboxusercontent.com/scl/fi/y1z52i2q3g9y1ajcaw8p5/Meditaci-n-de-5-minutos-con-m-sica-binaural-con-Ondas-Alfa-Calma-y-paz-interior-Med-Soul-Med-Soul.mp3?rlkey=j8elwp0uj6tpt0bxucu6eli57&dl=1" type="audio/mpeg">
</audio>

<script>
    const music = document.getElementById('bgAudio');
    const core = document.getElementById('visual-core');
    const status = document.getElementById('status');
    
    // Asegurar bucle infinito
    music.addEventListener('ended', () => { music.currentTime = 0; music.play(); });

    let voicePaused = false;
    let currentStep = 0;
    let selectedPlaylist = 0;
    let timer;

    const medSkins = [
        // 1. DISPENZA
        [{t:"Cierra los ojos. Conviértete en nada. Sé nadie.", p:10000}, {t:"Lleva tu atención al pecho. Respira a través de tu corazón.", p:12000}, {t:"Gratitud pura. Eres salud. Eres coherencia.", p:18000}, {t:"Vida Plena.", p:5000}],
        // 2. TIROIDES
        [{t:"La vida ya reside en ti. Conecta con tu diseño.", p:10000}, {t:"Atención a tu tiroides. Centro de equilibrio.", p:12000}, {t:"Metabolismo alineándose a la Gracia.", p:12000}, {t:"Amor perfecto que echa fuera el temor. Vida Plena.", p:8000}],
        // 3. NUEVO PACTO SALUD
        [{t:"Entra en el descanso del Nuevo Pacto.", p:12000}, {t:"Tu sangre es vivificada por el Espíritu.", p:15000}, {t:"Tu cuerpo recuerda su salud original.", p:18000}, {t:"Vida Plena.", p:8000}],
        // 4. FINANCIERA (TEXTO COMPLETO)
        [
            { t: "Cierra los ojos. Estás entrando en tu provisión.", p: 10000 },
            { t: "No necesitas sostenerte, ya estás sostenido.", p: 10000 },
            { t: "Tu provisión comienza en la filiación, no en el esfuerzo.", p: 15000 },
            { t: "No eres un buscador de recursos. Eres un heredero.", p: 15000 },
            { t: "No tengo que ganarme lo que ya me fue confiado.", p: 20000 },
            { t: "Administro con sabiduría. Mi vida financiera se ordena desde dentro.", p: 20000 },
            { t: "Vida Plena.", p: 8000 }
        ]
    ];

    function selectMeditation(index) {
        stopVoice();
        selectedPlaylist = index;
        document.querySelectorAll('.playlist-item').forEach(el => el.classList.remove('selected'));
        document.getElementById('item-' + index).classList.add('selected');
        const colors = ["#38bdf8", "#10b981", "#fbbf24", "#a855f7"];
        core.style.boxShadow = `0 0 50px 15px ${colors[index]}`;
        status.innerText = "Guía lista. Presiona Iniciar.";
    }

    function playMusic() { music.play(); }
    function pauseMusic() { music.pause(); }
    function stopMusic() { music.pause(); music.currentTime = 0; }
    function updateMusicVol() { music.volume = document.getElementById('musicVol').value; }

    function startVoice() {
        window.speechSynthesis.cancel();
        voicePaused = false;
        core.classList.add('active-pulse');
        document.getElementById('vPlay').classList.add('active');
        hablar(currentStep);
    }

    function pauseVoice() {
        voicePaused = true;
        window.speechSynthesis.cancel();
        document.getElementById('vPlay').classList.remove('active');
        core.classList.remove('active-pulse');
    }

    function stopVoice() {
        voicePaused = true; currentStep = 0;
        window.speechSynthesis.cancel();
        clearTimeout(timer);
        core.classList.remove('active-pulse');
        document.getElementById('vPlay').classList.remove('active');
        status.innerText = "Vida Plena";
    }

    function hablar(index) {
        const guion = medSkins[selectedPlaylist];
        if (voicePaused || index >= guion.length) {
            if (index >= guion.length) status.innerText = "Vida Plena";
            return;
        }
        currentStep = index;
        const msg = new SpeechSynthesisUtterance(guion[index].t);
        msg.lang = 'es-ES';
        msg.rate = 0.65;
        msg.pitch = 0.8;
        msg.volume = document.getElementById('voiceVol').value;
        const voices = window.speechSynthesis.getVoices();
        const vozM = voices.find(v => v.lang.includes('es') && (v.name.includes('David') || v.name.includes('Pablo')));
        if (vozM) msg.voice = vozM;
        msg.onstart = () => { status.innerText = guion[index].t; };
        msg.onend = () => { if (!voicePaused) timer = setTimeout(() => hablar(index + 1), guion[index].p); };
        window.speechSynthesis.speak(msg);
    }
</script>
</body>
</html>
